You are fixing Lesson 8 (Memory Injection) at:
/Users/mjs/Documents/code/panaversity-official/tutorsgpt/test/apps/learn-app/docs/01-General-Agents-Foundations/04-context-engineering/08-memory-injection.md

## Issues to Fix

Based on research against official Claude Code documentation, these issues were found:

### Issue 1: Thinking Block Access (HIGH)
**Current lesson implies**: Direct access to thinking blocks
**Reality**: Requires reading `transcript_path` file and parsing JSONL manually

The hook receives `transcript_path` as input, NOT a thinking_block field. Add a section explaining:
1. You must read the transcript file at `transcript_path`
2. Parse the JSONL format
3. Extract thinking blocks from the parsed content
4. This adds I/O latency

### Issue 2: Hook Output Format (HIGH)  
**Current lesson shows** at line 595-600:
```python
result = format_injection(memories)
return result  # Wrong - returns plain string
```

**Reality**: PreToolUse hooks must return JSON with `hookSpecificOutput`:
```json
{
  "hookSpecificOutput": {
    "hookEventName": "PreToolUse",
    "additionalContext": "Your memory content here"
  }
}
```

Fix the `on_pre_tool_use()` function to return proper JSON.

### Issue 3: 500ms Constraint (MEDIUM)
**Current lesson states**: "must complete quickly (<500ms recommended)"
**Reality**: Official docs specify 600-second default timeout. No 500ms requirement exists.

Reframe as: "For good UX, aim for sub-second response times. Vector embedding typically takes 100-300ms alone, so optimize carefully."

### Issue 4: Performance Reality (MEDIUM)
The lesson doesn't warn that vector embedding is the bottleneck:
- Embedding 1,500 chars: ~100-300ms on CPU
- Reading transcript file: ~10-50ms
- Vector query: ~5-50ms

Add realistic timing expectations.

## What to Keep

These are VERIFIED CORRECT:
- `additionalContext` field exists and works ✅
- PreToolUse fires before each tool ✅
- UserPromptSubmit vs PreToolUse timing comparison ✅
- The overall architecture concept is sound ✅

## Instructions

1. Read the current lesson file
2. Fix ONLY the technical inaccuracies listed above
3. Keep the pedagogical structure, domain examples, and Try With AI prompts
4. Update code examples to show correct JSON output format
5. Add realistic performance expectations
6. Clarify transcript parsing requirements

Write the corrected file using the Edit tool. Make targeted edits, don't rewrite the whole file unnecessarily.
